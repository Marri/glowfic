- klass = cycle('even', 'odd')

.post-container{class: klass}
  - if reply.is_a?(Reply) && reply.id.present?
    <a name="reply-#{reply.id}"></a>
  .padding-10
    .post-info-box
      - if reply.icon
        .post-icon
          = link_to icon_path(reply.icon) do
            = icon_tag reply.icon
      - if reply.character
        .post-character
          = link_to reply.character.name, character_path(reply.character)
        - if reply.character.screenname
          .post-screenname= reply.character.screenname
      - else
        .dark.spacer
      .post-author
        = link_to reply.user.username, user_path(reply.user)
    .post-edit-box
      - if reply.is_a?(Reply) && reply.id.present?
        = link_to post_path(reply.post, per_page: 'all', anchor: "reply-#{reply.id}") do
          = image_tag "/images/link.png"
      - elsif reply.id.present?
        = link_to post_path(reply) do
          = image_tag "/images/link.png"
      - if reply.user == current_user && reply.id.present?
        = link_to path_for(reply, 'edit_%s') do
          = image_tag "/images/pencil.png"
        = link_to path_for(reply, '%s'), method: :delete, confirm: 'Are you sure? This will delete this post AND any post that follows it!' do
          = image_tag "/images/cross.png"
    = sanitize(reply.content.gsub("\n","<br>")).html_safe
  %div{style:'padding:0px;clear:both'}
    .right-align{style: 'width:100%; font-size: 14px;'}> 
      .padding-5>
        - if reply.id
          Posted #{pretty_time(reply.created_at)}
          - if reply.audits.count > 1
            | Updated #{pretty_time(reply.updated_at) + ' |'}
            = link_to 'See History', path_for(reply, 'history_%s')
